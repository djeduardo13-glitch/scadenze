<!doctype html>
<html lang="it">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
    <meta name="theme-color" content="#0a7a44" />
    <meta name="description" content="Gestione scadenze documenti familiari" />
    <link rel="manifest" href="manifest.json" />
    <link rel="icon" href="icons/icon-192.svg" sizes="192x192" />
    <link rel="apple-touch-icon" href="icons/icon-192.svg" />
    <link rel="stylesheet" href="style.css" />
    <title>Scadenze Famiglia</title>
  </head>
<!-- Firebase -->
<script src="https://www.gstatic.com/firebasejs/10.12.2/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/10.12.2/firebase-database-compat.js"></script>

<script src="app.js"></script>
  <body>
    <main class="app-shell">
      <header class="app-header card">
        <h1>Scadenze Famiglia</h1>
        <p>Gestione documenti, promemoria e report WhatsApp</p>
      </header>

      <section class="card">
        <h2 id="form-title">Nuovo documento</h2>
        <form id="document-form" novalidate>
          <input type="hidden" id="record-id" />

          <label for="person">Nome persona</label>
          <input id="person" name="person" type="text" autocomplete="name" required placeholder="Es. Mario Rossi" />

          <label for="docType">Tipo documento</label>
          <input id="docType" name="docType" type="text" required placeholder="Es. Carta d'identitÃ " />

          <label for="expiryDate">Data di scadenza</label>
          <input id="expiryDate" name="expiryDate" type="date" required />

          <label for="notes">Note (opzionali)</label>
          <textarea id="notes" name="notes" rows="3" placeholder="Aggiungi informazioni utili"></textarea>

          <div class="form-actions">
            <button type="submit" class="btn primary" id="save-btn">Salva</button>
            <button type="button" class="btn ghost hidden" id="cancel-edit-btn">Annulla modifica</button>
          </div>
        </form>
      </section>

      <section class="card">
        <div class="section-top">
          <h2>Documenti salvati</h2>
          <span id="count-chip" class="chip">0 elementi</span>
        </div>
        <div id="empty-state" class="empty-state">Nessun documento inserito.</div>
        <ul id="documents-list" class="documents-list" aria-live="polite"></ul>
      </section>

      <section class="card">
        <h2>Condivisione e report</h2>
        <div class="stack">
          <button id="whatsapp-report-btn" class="btn whatsapp">Invia report WhatsApp</button>
          <button id="export-btn" class="btn">Esporta dati JSON</button>
          <label class="btn secondary" for="import-file">Importa dati JSON</label>
          <input id="import-file" type="file" accept="application/json" hidden />
        </div>
      </section>
    </main>

    <dialog id="monthly-alert">
      <h3>Promemoria mensile</h3>
      <p id="monthly-alert-text"></p>
      <button id="close-alert-btn" class="btn primary">Ho capito</button>
    </dialog>

    <template id="document-item-template">
      <li class="document-item fade-in">
        <div class="item-main">
          <h3 class="item-person"></h3>
          <p class="item-document"></p>
          <p class="item-date"></p>
          <p class="item-notes"></p>
          <span class="status-pill"></span>
        </div>
        <div class="item-actions">
          <button class="btn small edit-btn">Modifica</button>
          <button class="btn small danger delete-btn">Elimina</button>
        </div>
      </li>
    </template>

    <script src="app.js" defer></script>
  </body>
</html>
